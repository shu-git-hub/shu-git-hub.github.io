<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å•é¡Œç™»éŒ²</title>
</head>
<body>

<h2>ğŸ“˜ å•é¡Œç™»éŒ²</h2>
<input type="text" id="question" placeholder="å•é¡Œ">
<input type="text" id="answer" placeholder="ç­”ãˆ">
<button onclick="saveQuestion()">ä¿å­˜</button>
<button onclick="location.href='index.html'">æˆ»ã‚‹</button>

<script>
async function generateHash(text) {
  const encoder = new TextEncoder();
  const data = encoder.encode(text);
  const hashBuffer = await crypto.subtle.digest("SHA-256", data);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
}

async function saveQuestion() {
  const question = document.getElementById("question").value.trim();
  const answer = document.getElementById("answer").value.trim();
  if (!question || !answer) return alert("å…¥åŠ›ã—ã¦ãã ã•ã„");

  const hash = await generateHash(question + "||" + answer);

  let data = JSON.parse(localStorage.getItem("words")) || [];
  if (data.some(item => item.hash === hash)) {
    return alert("åŒã˜å•é¡ŒãŒã™ã§ã«å­˜åœ¨ã—ã¾ã™");
  }

  data.push({
    id: Date.now(),
    question,
    answer,
    correct: 0,
    incorrect: 0,
    pass: 0,
    hash
  });

  localStorage.setItem("words", JSON.stringify(data));
  alert("ä¿å­˜ã—ã¾ã—ãŸ");
}
</script>
</body>
</html>
